import"./base-bca4072a.js";import{E as H}from"./card-86ca6f7c.js";import{D as Z,E as q,a as K}from"./tag-3d5525ac.js";import"./scrollbar-d8ba084a.js";import"./popper-0dc31dc9.js";import{E as R}from"./popover-a65edf18.js";import{E as Y}from"./button-dab0515e.js";import{E as G}from"./input-1f089c3a.js";/* empty css             */import{E as J,a as Q}from"./select-2d479874.js";import{E as X}from"./overlay-65e5b564.js";import{r as _,E as ee}from"./index-1531c9b4.js";import{u as te,o as le}from"./kube-a5043f54.js";import{_ as y}from"./CodeEditor-96962f84.js";import{I as M}from"./index-a30895c1.js";import{c as t,r as i,p as ae,z as oe,y as ne,o as b,a as $,w as n,f as r,u as c,F as se,b as ie,d as re,h as V,t as ce}from"./index-c09751bd.js";import{E as de}from"./index-aa6ba756.js";import{E as me}from"./index-1ed85de7.js";import{S as ue}from"./Search-e2cb8b34.js";import{T as ke,L as he}from"./Terminal-4c367217.js";import"./error-78e43d3e.js";import"./isNil-c75b1b34.js";import"./focus-trap-563a4cd8.js";import"./vnode-7069167d.js";import"./axios-a342f982.js";import"./_commonjsHelpers-de833af9.js";const fe=M("cube-three",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M15.5 9L7 14V24V34L15.5 39L24 44L32.5001 39L41 34V24V14L32.5001 9L24 4L15.5 9Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 4L24 24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M41 34L24 24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M7 34L24 24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 44V34",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M41 14L33 19",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M7 14L15 19",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ve=M("file-display-one",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M40 23V14L31 4H10C8.89543 4 8 4.89543 8 6V42C8 43.1046 8.89543 44 10 44H22",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M33 41C37.9706 41 42 35 42 35C42 35 37.9706 29 33 29C28.0294 29 24 35 24 35C24 35 28.0294 41 33 41Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M33 37C34.1046 37 35 36.1046 35 35C35 33.8954 34.1046 33 33 33C31.8954 33 31 33.8954 31 35C31 36.1046 31.8954 37 33 37Z",fill:e.colors[2]},null),t("path",{d:"M30 4V14H40",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),pe={class:"w-full justify-center"},_e={class:"flex flex-col h-full px-[4rem] py-[2rem] space-y-[1rem]"},we={class:"flex flex-col overflow-hidden rounded-md shadow-md border"},Le={class:"flex w-full h-[5rem] items-center"},ge=r("span",{class:"m-[0.75rem] text-2xl font-600"},"Pods",-1),xe={class:"flex w-full space-x-[2rem]"},Ce={class:"space-x-[0.75rem]"},be=r("p",null,"Are you sure to delete this app?",-1),Ve={class:"ml-[0.5rem]"},Qe={__name:"Pod",setup(e){const w=i(!1),f=i(-1),E=i({}),j=te(),s=i(j.getNamespace()),k=i([]),v=i([]),p=i(""),z=ae(()=>v.value.filter(a=>!p.value||a.metadata.name.toLowerCase().includes(p.value.toLowerCase())));oe(()=>{_.get("/api/v1/namespaces").then(a=>{k.value=a.data.data.items,k.value.sort(function(o,d){let x=o.metadata.name,C=d.metadata.name;return x.localeCompare(C)}),!s.value&&k.value.length>0&&(s.value=k.value[0].metadata.name)})});const W=a=>{_.get(`/api/v1/namespaces/${a}/pods`).then(o=>{v.value=o.data.data.items})};ne(()=>{if(!s.value)return[];j.setNamespace(s.value),W(s.value)});const P=a=>{E.value=Object.assign({},a),w.value=!0},T=a=>{_.delete(`/api/v1/namespaces/${s.value}/pods`).then(()=>{ee.success("Delete success");const o=v.value.findIndex(d=>d.metadata.name===a.metadata.name);v.value.splice(o,1),f.value=-1})},S=a=>{window.open(`/namespaces/${s.value}/pods/${a.metadata.name}/exec`,"_blank")},L=i(!1),g=i(),B=a=>{g.value="",_.get(`/api/v1/namespaces/${s.value}/pods/${a.metadata.name}/log`).then(o=>{g.value=o.data}),L.value=!0},N=a=>a=="Pending"?"":a=="Running"?"success":a=="Failed"?"danger":"info";return(a,o)=>{const d=X,x=J,C=Q,D=de,I=G,m=q,O=me,u=Y,U=R,F=K,A=H;return b(),$("div",pe,[t(d,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=l=>w.value=l),top:"5vh",width:"98%",title:"View Yaml"},{default:n(()=>[t(y,{height:"60vh",value:c(le)(E.value),readOnly:""},null,8,["value"])]),_:1},8,["modelValue"]),t(d,{modelValue:L.value,"onUpdate:modelValue":o[1]||(o[1]=l=>L.value=l),top:"5vh",width:"98%",title:"View Log"},{default:n(()=>[t(y,{height:"60vh",value:g.value,mode:"log",readOnly:"",light:""},null,8,["value"])]),_:1},8,["modelValue"]),r("div",_e,[r("div",we,[r("div",Le,[t(c(fe),{class:"ml-[1rem]",theme:"filled",size:"42",fill:"#94A3B8"}),ge])]),t(A,{class:"h-max flex-row"},{header:n(()=>[r("div",xe,[t(C,{class:"w-1/3",modelValue:s.value,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value=l),filterable:"",placeholder:"please select namespace"},{default:n(()=>[(b(!0),$(se,null,ie(k.value,l=>(b(),re(x,{label:l.metadata.name,value:l.metadata.name},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),t(I,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=l=>p.value=l),placeholder:"Type to search"},{prefix:n(()=>[t(D,null,{default:n(()=>[t(c(ue))]),_:1})]),_:1},8,["modelValue"])])]),default:n(()=>[t(F,{data:z.value,height:"360",class:"w-full max-h-full"},{default:n(()=>[t(m,{prop:"metadata.name",label:"Name",sortable:""}),t(m,{prop:"metadata.namespace",label:"Namespace"}),t(m,{prop:"status",label:"Status"},{default:n(l=>[t(O,{type:N(l.row.status.phase)},{default:n(()=>[V(ce(l.row.status.phase),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"spec.containers[0].image",label:"Image","min-width":"120px"}),t(m,{prop:"metadata.creationTimestamp",label:"StartAt",sortable:"","min-width":"120px"}),t(m,{label:"Operation","min-width":"120px"},{default:n(l=>[r("div",Ce,[t(u,{size:"small",type:"primary",circle:"",onClick:h=>S(l.row),icon:c(ke)},null,8,["onClick","icon"]),t(u,{size:"small",circle:"",onClick:h=>B(l.row),icon:c(he)},null,8,["onClick","icon"]),t(u,{type:"success",size:"small",circle:"",onClick:h=>P(l.row),icon:c(ve)},null,8,["onClick","icon"]),t(U,{visible:f.value==l.$index,placement:"top",width:180},{reference:n(()=>[t(u,{size:"small",type:"danger",onClick:h=>f.value=l.$index,icon:c(Z),circle:"",class:"wl-[1rem]"},null,8,["onClick","icon"])]),default:n(()=>[be,r("div",Ve,[t(u,{size:"small",text:"",onClick:o[4]||(o[4]=h=>f.value=-1)},{default:n(()=>[V("cancel")]),_:1}),t(u,{size:"small",type:"danger",onClick:h=>T(l.row)},{default:n(()=>[V("confirm ")]),_:2},1032,["onClick"])])]),_:2},1032,["visible"])])]),_:1})]),_:1},8,["data"])]),_:1})])])}}};export{Qe as default};
