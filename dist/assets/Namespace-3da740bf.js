import{b as K,_ as J,d as ue,u as G,w as he}from"./base-bca4072a.js";import{E as Ce}from"./card-86ca6f7c.js";import{E as de}from"./input-1f089c3a.js";import{i as Pe,D as ke,E as ye,a as ze}from"./tag-3d5525ac.js";import{E as ce,a as pe}from"./select-2d479874.js";import"./scrollbar-d8ba084a.js";import"./popper-0dc31dc9.js";import{E as xe}from"./popover-a65edf18.js";/* empty css             */import{E as we}from"./overlay-65e5b564.js";import{E as Ne}from"./button-dab0515e.js";import{E as Se,a as Ee}from"./form-item-d5bd7b56.js";import{m as ge,r as Q,E as X}from"./index-1531c9b4.js";import{k as T,p as S,o as m,a as z,t as F,d as q,w as _,e as fe,u as a,m as $e,r as P,x as ee,c as r,F as te,b as ne,H as I,f as j,y as Le,G as Y,P as Me,q as Te,K as Be,B as U,E as je,z as Ie,h as R}from"./index-c09751bd.js";import{I as Ve}from"./index-a30895c1.js";import{i as ae,b as H,E as le,c as me,d as qe,m as se,e as Ae,f as D,g as We,h as De}from"./index-aa6ba756.js";import{d as Ue}from"./error-78e43d3e.js";import{S as Fe}from"./Search-e2cb8b34.js";import"./isNil-c75b1b34.js";import"./index-1ed85de7.js";import"./focus-trap-563a4cd8.js";import"./vnode-7069167d.js";import"./castArray-c808c6e2.js";import"./axios-a342f982.js";const ve=Symbol("elPaginationKey"),Ke=K({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:ae}}),He={click:e=>e instanceof MouseEvent},Oe=["disabled","aria-label","aria-disabled"],Ge={key:0},Je=T({name:"ElPaginationPrev"}),Re=T({...Je,props:Ke,emits:He,setup(e){const u=e,{t:n}=H(),c=S(()=>u.disabled||u.currentPage<=1);return(s,d)=>(m(),z("button",{type:"button",class:"btn-prev",disabled:a(c),"aria-label":s.prevText||a(n)("el.pagination.prev"),"aria-disabled":a(c),onClick:d[0]||(d[0]=b=>s.$emit("click",b))},[s.prevText?(m(),z("span",Ge,F(s.prevText),1)):(m(),q(a(le),{key:1},{default:_(()=>[(m(),q(fe(s.prevIcon)))]),_:1}))],8,Oe))}});var Ze=J(Re,[["__file","prev.vue"]]);const Qe=K({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:ae}}),Xe=["disabled","aria-label","aria-disabled"],Ye={key:0},ea=T({name:"ElPaginationNext"}),aa=T({...ea,props:Qe,emits:["click"],setup(e){const u=e,{t:n}=H(),c=S(()=>u.disabled||u.currentPage===u.pageCount||u.pageCount===0);return(s,d)=>(m(),z("button",{type:"button",class:"btn-next",disabled:a(c),"aria-label":s.nextText||a(n)("el.pagination.next"),"aria-disabled":a(c),onClick:d[0]||(d[0]=b=>s.$emit("click",b))},[s.nextText?(m(),z("span",Ye,F(s.nextText),1)):(m(),q(a(le),{key:1},{default:_(()=>[(m(),q(fe(s.nextIcon)))]),_:1}))],8,Xe))}});var ta=J(aa,[["__file","next.vue"]]);const oe=()=>$e(ve,{}),na=K({pageSize:{type:Number,required:!0},pageSizes:{type:ue(Array),default:()=>ge([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:me}}),la=T({name:"ElPaginationSizes"}),oa=T({...la,props:na,emits:["page-size-change"],setup(e,{emit:u}){const n=e,{t:c}=H(),s=G("pagination"),d=oe(),b=P(n.pageSize);ee(()=>n.pageSizes,(p,y)=>{if(!Pe(p,y)&&Array.isArray(p)){const g=p.includes(n.pageSize)?n.pageSize:n.pageSizes[0];u("page-size-change",g)}}),ee(()=>n.pageSize,p=>{b.value=p});const k=S(()=>n.pageSizes);function E(p){var y;p!==b.value&&(b.value=p,(y=d.handleSizeChange)==null||y.call(d,Number(p)))}return(p,y)=>(m(),z("span",{class:I(a(s).e("sizes"))},[r(a(pe),{"model-value":b.value,disabled:p.disabled,"popper-class":p.popperClass,size:p.size,teleported:p.teleported,"validate-event":!1,onChange:E},{default:_(()=>[(m(!0),z(te,null,ne(a(k),g=>(m(),q(a(ce),{key:g,value:g,label:g+a(c)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var sa=J(oa,[["__file","sizes.vue"]]);const ia=K({size:{type:String,values:me}}),ra=["disabled"],ua=T({name:"ElPaginationJumper"}),da=T({...ua,props:ia,setup(e){const{t:u}=H(),n=G("pagination"),{pageCount:c,disabled:s,currentPage:d,changeEvent:b}=oe(),k=P(),E=S(()=>{var g;return(g=k.value)!=null?g:d==null?void 0:d.value});function p(g){k.value=g?+g:""}function y(g){g=Math.trunc(+g),b==null||b(g),k.value=void 0}return(g,$)=>(m(),z("span",{class:I(a(n).e("jump")),disabled:a(s)},[j("span",{class:I([a(n).e("goto")])},F(a(u)("el.pagination.goto")),3),r(a(de),{size:g.size,class:I([a(n).e("editor"),a(n).is("in-pagination")]),min:1,max:a(c),disabled:a(s),"model-value":a(E),"validate-event":!1,label:a(u)("el.pagination.page"),type:"number","onUpdate:modelValue":p,onChange:y},null,8,["size","class","max","disabled","model-value","label"]),j("span",{class:I([a(n).e("classifier")])},F(a(u)("el.pagination.pageClassifier")),3)],10,ra))}});var ca=J(da,[["__file","jumper.vue"]]);const pa=K({total:{type:Number,default:1e3}}),ga=["disabled"],fa=T({name:"ElPaginationTotal"}),ma=T({...fa,props:pa,setup(e){const{t:u}=H(),n=G("pagination"),{disabled:c}=oe();return(s,d)=>(m(),z("span",{class:I(a(n).e("total")),disabled:a(c)},F(a(u)("el.pagination.total",{total:s.total})),11,ga))}});var va=J(ma,[["__file","total.vue"]]);const ba=K({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_a=["onKeyup"],ha=["aria-current","aria-label","tabindex"],Ca=["tabindex","aria-label"],Pa=["aria-current","aria-label","tabindex"],ka=["tabindex","aria-label"],ya=["aria-current","aria-label","tabindex"],za=T({name:"ElPaginationPager"}),xa=T({...za,props:ba,emits:["change"],setup(e,{emit:u}){const n=e,c=G("pager"),s=G("icon"),{t:d}=H(),b=P(!1),k=P(!1),E=P(!1),p=P(!1),y=P(!1),g=P(!1),$=S(()=>{const t=n.pagerCount,o=(t-1)/2,l=Number(n.currentPage),B=Number(n.pageCount);let L=!1,V=!1;B>t&&(l>t-o&&(L=!0),l<B-o&&(V=!0));const x=[];if(L&&!V){const h=B-(t-2);for(let W=h;W<B;W++)x.push(W)}else if(!L&&V)for(let h=2;h<t;h++)x.push(h);else if(L&&V){const h=Math.floor(t/2)-1;for(let W=l-h;W<=l+h;W++)x.push(W)}else for(let h=2;h<B;h++)x.push(h);return x}),C=S(()=>["more","btn-quickprev",s.b(),c.is("disabled",n.disabled)]),O=S(()=>["more","btn-quicknext",s.b(),c.is("disabled",n.disabled)]),A=S(()=>n.disabled?-1:0);Le(()=>{const t=(n.pagerCount-1)/2;b.value=!1,k.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-t&&(b.value=!0),n.currentPage<n.pageCount-t&&(k.value=!0))});function f(t=!1){n.disabled||(t?E.value=!0:p.value=!0)}function v(t=!1){t?y.value=!0:g.value=!0}function N(t){const o=t.target;if(o.tagName.toLowerCase()==="li"&&Array.from(o.classList).includes("number")){const l=Number(o.textContent);l!==n.currentPage&&u("change",l)}else o.tagName.toLowerCase()==="li"&&Array.from(o.classList).includes("more")&&i(t)}function i(t){const o=t.target;if(o.tagName.toLowerCase()==="ul"||n.disabled)return;let l=Number(o.textContent);const B=n.pageCount,L=n.currentPage,V=n.pagerCount-2;o.className.includes("more")&&(o.className.includes("quickprev")?l=L-V:o.className.includes("quicknext")&&(l=L+V)),Number.isNaN(+l)||(l<1&&(l=1),l>B&&(l=B)),l!==L&&u("change",l)}return(t,o)=>(m(),z("ul",{class:I(a(c).b()),onClick:i,onKeyup:Me(N,["enter"])},[t.pageCount>0?(m(),z("li",{key:0,class:I([[a(c).is("active",t.currentPage===1),a(c).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===1,"aria-label":a(d)("el.pagination.currentPage",{pager:1}),tabindex:a(A)}," 1 ",10,ha)):Y("v-if",!0),b.value?(m(),z("li",{key:1,class:I(a(C)),tabindex:a(A),"aria-label":a(d)("el.pagination.prevPages",{pager:t.pagerCount-2}),onMouseenter:o[0]||(o[0]=l=>f(!0)),onMouseleave:o[1]||(o[1]=l=>E.value=!1),onFocus:o[2]||(o[2]=l=>v(!0)),onBlur:o[3]||(o[3]=l=>y.value=!1)},[(E.value||y.value)&&!t.disabled?(m(),q(a(qe),{key:0})):(m(),q(a(se),{key:1}))],42,Ca)):Y("v-if",!0),(m(!0),z(te,null,ne(a($),l=>(m(),z("li",{key:l,class:I([[a(c).is("active",t.currentPage===l),a(c).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===l,"aria-label":a(d)("el.pagination.currentPage",{pager:l}),tabindex:a(A)},F(l),11,Pa))),128)),k.value?(m(),z("li",{key:2,class:I(a(O)),tabindex:a(A),"aria-label":a(d)("el.pagination.nextPages",{pager:t.pagerCount-2}),onMouseenter:o[4]||(o[4]=l=>f()),onMouseleave:o[5]||(o[5]=l=>p.value=!1),onFocus:o[6]||(o[6]=l=>v()),onBlur:o[7]||(o[7]=l=>g.value=!1)},[(p.value||g.value)&&!t.disabled?(m(),q(a(Ae),{key:0})):(m(),q(a(se),{key:1}))],42,ka)):Y("v-if",!0),t.pageCount>1?(m(),z("li",{key:3,class:I([[a(c).is("active",t.currentPage===t.pageCount),a(c).is("disabled",t.disabled)],"number"]),"aria-current":t.currentPage===t.pageCount,"aria-label":a(d)("el.pagination.currentPage",{pager:t.pageCount}),tabindex:a(A)},F(t.pageCount),11,ya)):Y("v-if",!0)],42,_a))}});var wa=J(xa,[["__file","pager.vue"]]);const w=e=>typeof e!="number",Na=K({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>D(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:ue(Array),default:()=>ge([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:ae,default:()=>We},nextText:{type:String,default:""},nextIcon:{type:ae,default:()=>De},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Sa={"update:current-page":e=>D(e),"update:page-size":e=>D(e),"size-change":e=>D(e),change:(e,u)=>D(e)&&D(u),"current-change":e=>D(e),"prev-click":e=>D(e),"next-click":e=>D(e)},ie="ElPagination";var Ea=T({name:ie,props:Na,emits:Sa,setup(e,{emit:u,slots:n}){const{t:c}=H(),s=G("pagination"),d=Te().vnode.props||{},b="onUpdate:currentPage"in d||"onUpdate:current-page"in d||"onCurrentChange"in d,k="onUpdate:pageSize"in d||"onUpdate:page-size"in d||"onSizeChange"in d,E=S(()=>{if(w(e.total)&&w(e.pageCount)||!w(e.currentPage)&&!b)return!1;if(e.layout.includes("sizes")){if(w(e.pageCount)){if(!w(e.total)&&!w(e.pageSize)&&!k)return!1}else if(!k)return!1}return!0}),p=P(w(e.defaultPageSize)?10:e.defaultPageSize),y=P(w(e.defaultCurrentPage)?1:e.defaultCurrentPage),g=S({get(){return w(e.pageSize)?p.value:e.pageSize},set(i){w(e.pageSize)&&(p.value=i),k&&(u("update:page-size",i),u("size-change",i))}}),$=S(()=>{let i=0;return w(e.pageCount)?w(e.total)||(i=Math.max(1,Math.ceil(e.total/g.value))):i=e.pageCount,i}),C=S({get(){return w(e.currentPage)?y.value:e.currentPage},set(i){let t=i;i<1?t=1:i>$.value&&(t=$.value),w(e.currentPage)&&(y.value=t),b&&(u("update:current-page",t),u("current-change",t))}});ee($,i=>{C.value>i&&(C.value=i)}),ee([C,g],i=>{u("change",...i)},{flush:"post"});function O(i){C.value=i}function A(i){g.value=i;const t=$.value;C.value>t&&(C.value=t)}function f(){e.disabled||(C.value-=1,u("prev-click",C.value))}function v(){e.disabled||(C.value+=1,u("next-click",C.value))}function N(i,t){i&&(i.props||(i.props={}),i.props.class=[i.props.class,t].join(" "))}return Be(ve,{pageCount:$,disabled:S(()=>e.disabled),currentPage:C,changeEvent:O,handleSizeChange:A}),()=>{var i,t;if(!E.value)return Ue(ie,c("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&$.value<=1)return null;const o=[],l=[],B=U("div",{class:s.e("rightwrapper")},l),L={prev:U(Ze,{disabled:e.disabled,currentPage:C.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:f}),jumper:U(ca,{size:e.small?"small":"default"}),pager:U(wa,{currentPage:C.value,pageCount:$.value,pagerCount:e.pagerCount,onChange:O,disabled:e.disabled}),next:U(ta,{disabled:e.disabled,currentPage:C.value,pageCount:$.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:v}),sizes:U(sa,{pageSize:g.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:e.small?"small":"default"}),slot:(t=(i=n==null?void 0:n.default)==null?void 0:i.call(n))!=null?t:null,total:U(va,{total:w(e.total)?0:e.total})},V=e.layout.split(",").map(h=>h.trim());let x=!1;return V.forEach(h=>{if(h==="->"){x=!0;return}x?l.push(L[h]):o.push(L[h])}),N(o[0],s.is("first")),N(o[o.length-1],s.is("last")),x&&l.length>0&&(N(l[0],s.is("first")),N(l[l.length-1],s.is("last")),o.push(B)),U("div",{class:[s.b(),s.is("background",e.background),{[s.m("small")]:e.small}]},o)}}});const $a=he(Ea),re=Ve("bookmark-three",!0,function(e){return r("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[r("path",{d:"M7 9C7 7.34315 8.34315 6 10 6H41V42H10C8.34315 42 7 40.6569 7 39V9Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),r("path",{d:"M7 34L41 34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),r("path",{d:"M7 30V38",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),r("path",{d:"M41 30V38",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),r("path",{d:"M15 6H25V26L20 22L15 26V6Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),r("path",{d:"M11 6L29 6",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const La={class:"w-full flex justify-center"},Ma={class:"flex flex-col w-full h-full px-[4rem] py-[2rem] space-y-[1rem]"},Ta=j("span",{class:"text-gray-400"},"Select related group, will created a new namespace with group name",-1),Ba={class:"dialog-footer"},ja={class:"flex overflow-hidden rounded-md shadow-md border"},Ia={class:"flex w-full h-[5rem] items-center"},Va=j("span",{class:"m-[0.75rem] text-2xl font-600"},"Namespaces",-1),qa={class:"flex justify-between space-x-[2rem]"},Aa=j("p",null,"Are you sure to delete this namespace?",-1),Wa={class:"my-[0.5rem]"},Da={class:"flex w-full justify-center"},pt={__name:"Namespace",setup(e){const u=je(),n=P([]),c=P([]),s=P(!1),d=P(-1),b=P({}),k=P(10),E=P(1),p=P(""),y=S(()=>c.value.filter(f=>!p.value||f.metadata.name.toLowerCase().includes(p.value.toLowerCase()))),g=f=>f.slice(k.value*(E.value-1),k.value*E.value),$=f=>{E.value=f};Ie(()=>{let f=u.id;if(!f)return;let v=`/api/v1/users/${f}/groups`;u.inRoot&&(v="/api/v1/groups"),Q.get(v).then(N=>{n.value=N.data.data,n.value.length==0&&X.failed("No group find, please create it at first")}),Q.get("/api/v1/namespaces").then(N=>{c.value=N.data.data.items})});const C=f=>`${f.name}(${f.describe})`,O=()=>{let f=n.value[b.value.group];if(!f){X.failed("Group must selected");return}Q.post("/api/v1/namespaces",{apiVersion:"v1",kind:"Namespace",metadata:{name:f.name,annotations:{"weave.io/platform":"true","weave.io/describe":f.describe,"weave.io/group":f.name,"weave.io/group_id":`${f.id}`},labels:{"weave.io/platform":"true","weave.io/group":f.name}}}).then(v=>{X.success("Create success"),c.value.push(v.data.data),s.value=!1})},A=f=>{Q.delete("/api/v1/namespaces/"+f.metadata.name).then(()=>{X.success("Delete success");const v=c.value.findIndex(N=>N.metadata.name===f.metadata.name);c.value.splice(v,1),d.value=-1})};return(f,v)=>{const N=ce,i=pe,t=Se,o=Ee,l=Ne,B=we,L=le,V=de,x=ye,h=xe,W=ze,be=$a,_e=Ce;return m(),z("div",La,[j("div",Ma,[r(B,{modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=M=>s.value=M),title:"Create Namespace",width:"50%"},{footer:_(()=>[j("span",Ba,[r(l,{type:"primary",onClick:O},{default:_(()=>[R("Confirm")]),_:1}),r(l,{onClick:v[1]||(v[1]=M=>s.value=!1)},{default:_(()=>[R("Cancel")]),_:1})])]),default:_(()=>[r(o,{model:b.value,"label-position":"top","label-width":"auto"},{default:_(()=>[r(t,{label:"Name",prop:"group",required:""},{default:_(()=>[r(i,{class:"w-full",modelValue:b.value.group,"onUpdate:modelValue":v[0]||(v[0]=M=>b.value.group=M),filterable:"",placeholder:"please select related group"},{default:_(()=>[(m(!0),z(te,null,ne(n.value,(M,Z)=>(m(),q(N,{label:C(M),value:Z},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),Ta]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),j("div",ja,[j("div",Ia,[r(a(re),{class:"ml-[1rem]",theme:"filled",size:"42",fill:"#94A3B8"}),Va])]),r(_e,{class:"w-full h-max"},{header:_(()=>[j("div",qa,[r(V,{modelValue:p.value,"onUpdate:modelValue":v[3]||(v[3]=M=>p.value=M),placeholder:"Type to search"},{prefix:_(()=>[r(L,null,{default:_(()=>[r(a(Fe))]),_:1})]),_:1},8,["modelValue"]),r(l,{type:"primary",plain:"",icon:a(re),onClick:v[4]||(v[4]=M=>s.value=!0)},{default:_(()=>[R("Create")]),_:1},8,["icon"])])]),default:_(()=>[r(W,{data:g(y.value),class:"w-full max-h-full"},{default:_(()=>[r(x,{prop:"metadata.name",label:"Name"}),r(x,{prop:"metadata.labels['weave.io/group']",label:"Group"}),r(x,{prop:"metadata.annotations['weave.io/describe']",label:"Describe"}),r(x,{prop:"metadata.creationTimestamp",label:"CreateAt","min-width":"120px"}),r(x,{label:"Operation"},{default:_(M=>[r(h,{visible:d.value==M.$index,placement:"top",width:160},{reference:_(()=>[r(l,{size:"small",type:"danger",onClick:Z=>d.value=M.$index,icon:a(ke),circle:"",class:"wl-[1rem]"},null,8,["onClick","icon"])]),default:_(()=>[Aa,j("div",Wa,[r(l,{size:"small",text:"",onClick:v[5]||(v[5]=Z=>d.value=-1)},{default:_(()=>[R("cancel")]),_:1}),r(l,{size:"small",type:"danger",onClick:Z=>A(M.row)},{default:_(()=>[R("confirm")]),_:2},1032,["onClick"])])]),_:2},1032,["visible"])]),_:1})]),_:1},8,["data"]),j("div",Da,[r(be,{"page-size":k.value,"pager-count":5,layout:"prev, pager, next",total:y.value.length,onCurrentChange:$},null,8,["page-size","total"])])]),_:1})])])}}};export{pt as default};
