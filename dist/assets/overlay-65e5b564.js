import{z as se,y as fe,A as me,X as ve,al as pe,x as q,am as ye,an as _,k as Y,c as R,I as E,B as ge,m as Q,p as L,o as F,a as U,f as W,H as k,u as o,t as he,w as I,d as x,e as be,G as j,V as le,q as Ce,r as D,C as we,J as Ee,K as ke,g as Te,ad as Be,ak as Me,v as Se,a4 as Ie,ao as De}from"./index-c09751bd.js";import{u as J,b as Z,d as V,_ as ne,e as Le,w as Pe}from"./base-bca4072a.js";import{P as K,c as $e}from"./vnode-7069167d.js";import{t as X,a as G,R as ee,a0 as Ae,P as Fe,T as Oe,i as Ne,b as ze,E as Re,$ as Ye,r as He,a1 as We,a2 as Ve,X as oe}from"./index-aa6ba756.js";import{F as Xe,i as _e,E as Ue}from"./focus-trap-563a4cd8.js";import{U as ae}from"./input-1f089c3a.js";import{c as te,e as Ke}from"./button-dab0515e.js";import{t as qe}from"./error-78e43d3e.js";let H;const xe=e=>{var t;if(!X)return 0;if(H!==void 0)return H;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const i=s.offsetWidth;s.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",s.appendChild(l);const r=l.offsetWidth;return(t=s.parentNode)==null||t.removeChild(s),H=i-r,H};function Bo(e,t){if(!X)return;if(!t){e.scrollTop=0;return}const s=[];let i=t.offsetParent;for(;i!==null&&e!==i&&e.contains(i);)s.push(i),i=i.offsetParent;const l=t.offsetTop+s.reduce((f,c)=>f+c.offsetTop,0),r=l+t.offsetHeight,d=e.scrollTop,a=d+e.clientHeight;l<d?e.scrollTop=l:r>a&&(e.scrollTop=r-e.clientHeight)}const je=(e,t,s,i)=>{let l={offsetX:0,offsetY:0};const r=f=>{const c=f.clientX,p=f.clientY,{offsetX:y,offsetY:b}=l,m=e.value.getBoundingClientRect(),u=m.left,w=m.top,P=m.width,O=m.height,$=document.documentElement.clientWidth,N=document.documentElement.clientHeight,z=-u+y,A=-w+b,T=$-u-P+y,B=N-w-O+b,C=n=>{let v=y+n.clientX-c,g=b+n.clientY-p;i!=null&&i.value||(v=Math.min(Math.max(v,z),T),g=Math.min(Math.max(g,A),B)),l={offsetX:v,offsetY:g},e.value&&(e.value.style.transform=`translate(${G(v)}, ${G(g)})`)},M=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",M)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},a=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};se(()=>{fe(()=>{s.value?d():a()})}),me(()=>{a()})},Ge=(e,t={})=>{ve(e)||qe("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||J("popup"),i=pe(()=>s.bm("parent","hidden"));if(!X||ee(document.body,i.value))return;let l=0,r=!1,d="0";const a=()=>{setTimeout(()=>{Oe(document==null?void 0:document.body,i.value),r&&document&&(document.body.style.width=d)},200)};q(e,f=>{if(!f){a();return}r=!ee(document.body,i.value),r&&(d=document.body.style.width),l=xe(s.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,p=Ae(document.body,"overflowY");l>0&&(c||p==="scroll")&&r&&(document.body.style.width=`calc(100% - ${l}px)`),Fe(document.body,i.value)}),ye(()=>a())},ie=e=>{if(!e)return{onClick:_,onMousedown:_,onMouseup:_};let t=!1,s=!1;return{onClick:d=>{t&&s&&e(d),t=s=!1},onMousedown:d=>{t=d.target===d.currentTarget},onMouseup:d=>{s=d.target===d.currentTarget}}},Je=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:V([String,Array,Object])},zIndex:{type:V([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},Qe="overlay";var eo=Y({name:"ElOverlay",props:Je,emits:Ze,setup(e,{slots:t,emit:s}){const i=J(Qe),l=f=>{s("click",f)},{onClick:r,onMousedown:d,onMouseup:a}=ie(e.customMaskEvent?void 0:l);return()=>e.mask?R("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:d,onMouseup:a},[E(t,"default")],K.STYLE|K.CLASS|K.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(t,"default")])}});const oo=eo,re=Symbol("dialogInjectionKey"),de=Z({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ne},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),to={close:()=>!0},so=["aria-level"],lo=["aria-label"],no=["id"],ao=Y({name:"ElDialogContent"}),io=Y({...ao,props:de,emits:to,setup(e){const t=e,{t:s}=ze(),{Close:i}=Ye,{dialogRef:l,headerRef:r,bodyId:d,ns:a,style:f}=Q(re),{focusTrapRef:c}=Q(Xe),p=L(()=>[a.b(),a.is("fullscreen",t.fullscreen),a.is("draggable",t.draggable),a.is("align-center",t.alignCenter),{[a.m("center")]:t.center}]),y=$e(c,l),b=L(()=>t.draggable),m=L(()=>t.overflow);return je(l,r,b,m),(u,w)=>(F(),U("div",{ref:o(y),class:k(o(p)),style:le(o(f)),tabindex:"-1"},[W("header",{ref_key:"headerRef",ref:r,class:k([o(a).e("header"),{"show-close":u.showClose}])},[E(u.$slots,"header",{},()=>[W("span",{role:"heading","aria-level":u.ariaLevel,class:k(o(a).e("title"))},he(u.title),11,so)]),u.showClose?(F(),U("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:k(o(a).e("headerbtn")),type:"button",onClick:w[0]||(w[0]=P=>u.$emit("close"))},[R(o(Re),{class:k(o(a).e("close"))},{default:I(()=>[(F(),x(be(u.closeIcon||o(i))))]),_:1},8,["class"])],10,lo)):j("v-if",!0)],2),W("div",{id:o(d),class:k(o(a).e("body"))},[E(u.$slots,"default")],10,no),u.$slots.footer?(F(),U("footer",{key:0,class:k(o(a).e("footer"))},[E(u.$slots,"footer")],2)):j("v-if",!0)],6))}});var ro=ne(io,[["__file","dialog-content.vue"]]);const uo=Z({...de,appendToBody:Boolean,appendTo:{type:V(String),default:"body"},beforeClose:{type:V(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>He(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fo=(e,t)=>{var s;const l=Ce().emit,{nextZIndex:r}=We();let d="";const a=te(),f=te(),c=D(!1),p=D(!1),y=D(!1),b=D((s=e.zIndex)!=null?s:r());let m,u;const w=Ve("namespace",Le),P=L(()=>{const h={},S=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(h[`${S}-margin-top`]=e.top),e.width&&(h[`${S}-width`]=G(e.width))),h}),O=L(()=>e.alignCenter?{display:"flex"}:{});function $(){l("opened")}function N(){l("closed"),l(ae,!1),e.destroyOnClose&&(y.value=!1)}function z(){l("close")}function A(){u==null||u(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=oe(()=>M(),e.openDelay):M()}function T(){m==null||m(),u==null||u(),e.closeDelay&&e.closeDelay>0?{stop:u}=oe(()=>n(),e.closeDelay):n()}function B(){function h(S){S||(p.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(h):T()}function C(){e.closeOnClickModal&&B()}function M(){X&&(c.value=!0)}function n(){c.value=!1}function v(){l("openAutoFocus")}function g(){l("closeAutoFocus")}function ue(h){var S;((S=h.detail)==null?void 0:S.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&Ge(c);function ce(){e.closeOnPressEscape&&B()}return q(()=>e.modelValue,h=>{h?(p.value=!1,A(),y.value=!0,b.value=_e(e.zIndex)?r():b.value++,we(()=>{l("open"),t.value&&(t.value.scrollTop=0)})):c.value&&T()}),q(()=>e.fullscreen,h=>{t.value&&(h?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),se(()=>{e.modelValue&&(c.value=!0,y.value=!0,A())}),{afterEnter:$,afterLeave:N,beforeLeave:z,handleClose:B,onModalClick:C,close:T,doClose:n,onOpenAutoFocus:v,onCloseAutoFocus:g,onCloseRequested:ce,onFocusoutPrevented:ue,titleId:a,bodyId:f,closed:p,style:P,overlayDialogStyle:O,rendered:y,visible:c,zIndex:b}},mo=["aria-label","aria-labelledby","aria-describedby"],vo=Y({name:"ElDialog",inheritAttrs:!1}),po=Y({...vo,props:uo,emits:co,setup(e,{expose:t}){const s=e,i=Ee();Ke({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!i.title));const l=J("dialog"),r=D(),d=D(),a=D(),{visible:f,titleId:c,bodyId:p,style:y,overlayDialogStyle:b,rendered:m,zIndex:u,afterEnter:w,afterLeave:P,beforeLeave:O,handleClose:$,onModalClick:N,onOpenAutoFocus:z,onCloseAutoFocus:A,onCloseRequested:T,onFocusoutPrevented:B}=fo(s,r);ke(re,{dialogRef:r,headerRef:d,bodyId:p,ns:l,rendered:m,style:y});const C=ie(N),M=L(()=>s.draggable&&!s.fullscreen);return t({visible:f,dialogContentRef:a}),(n,v)=>(F(),x(De,{to:n.appendTo,disabled:n.appendTo!=="body"?!1:!n.appendToBody},[R(Ie,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(P),onBeforeLeave:o(O),persisted:""},{default:I(()=>[Te(R(o(oo),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":o(u)},{default:I(()=>[W("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:o(c),"aria-describedby":o(p),class:k(`${o(l).namespace.value}-overlay-dialog`),style:le(o(b)),onClick:v[0]||(v[0]=(...g)=>o(C).onClick&&o(C).onClick(...g)),onMousedown:v[1]||(v[1]=(...g)=>o(C).onMousedown&&o(C).onMousedown(...g)),onMouseup:v[2]||(v[2]=(...g)=>o(C).onMouseup&&o(C).onMouseup(...g))},[R(o(Ue),{loop:"",trapped:o(f),"focus-start-el":"container",onFocusAfterTrapped:o(z),onFocusAfterReleased:o(A),onFocusoutPrevented:o(B),onReleaseRequested:o(T)},{default:I(()=>[o(m)?(F(),x(ro,Be({key:0,ref_key:"dialogContentRef",ref:a},n.$attrs,{center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:o(M),overflow:n.overflow,fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:o($)}),Me({header:I(()=>[n.$slots.title?E(n.$slots,"title",{key:1}):E(n.$slots,"header",{key:0,close:o($),titleId:o(c),titleClass:o(l).e("title")})]),default:I(()=>[E(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:I(()=>[E(n.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):j("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,mo)]),_:3},8,["mask","overlay-class","z-index"]),[[Se,o(f)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var yo=ne(po,[["__file","dialog.vue"]]);const Mo=Pe(yo);export{Mo as E,Bo as s};
