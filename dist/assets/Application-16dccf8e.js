import"./base-bca4072a.js";import{E as te}from"./card-86ca6f7c.js";import{D as le,E as oe,a as ne}from"./tag-3d5525ac.js";import"./scrollbar-d8ba084a.js";import"./popper-0dc31dc9.js";import{E as ae}from"./button-dab0515e.js";import{E as ie,a as se,b as re}from"./dropdown-item-adec3158.js";import{E as de}from"./popover-a65edf18.js";/* empty css             */import{E as ce}from"./overlay-65e5b564.js";import{E as ue,a as me}from"./form-item-d5bd7b56.js";import{E as fe}from"./input-1f089c3a.js";import{r as w,E as C}from"./index-1531c9b4.js";import{c as t,O as pe,r as p,p as ke,z as ve,o as he,a as _e,w as n,f as s,u as d,h as c,t as we}from"./index-c09751bd.js";import{_ as Ce}from"./CodeEditor-96962f84.js";import{A as U}from"./ApplicationOne-a923e249.js";import{T as ge,L as xe}from"./Terminal-4c367217.js";import{I as g}from"./index-a30895c1.js";import{E as Ve}from"./index-aa6ba756.js";import{E as be}from"./index-1ed85de7.js";import{S as ye}from"./Search-e2cb8b34.js";import{E as Le}from"./Edit-4f3134bf.js";import"./error-78e43d3e.js";import"./isNil-c75b1b34.js";import"./focus-trap-563a4cd8.js";import"./castArray-c808c6e2.js";import"./vnode-7069167d.js";import"./axios-a342f982.js";import"./_commonjsHelpers-de833af9.js";const Ee=g("api-app",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M18 23.9372V10C18 6.68629 20.6863 4 24 4C27.3137 4 30 6.68629 30 10V12.0057",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M30 24.0034V37.9999C30 41.3136 27.3137 43.9999 24 43.9999C20.6863 43.9999 18 41.3136 18 37.9999V35.9699",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M24 30H9.98415C6.67919 30 4 27.3137 4 24C4 20.6863 6.67919 18 9.98415 18H11.9886",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M24 18H37.9888C41.3087 18 44 20.6863 44 24C44 27.3137 41.3087 30 37.9888 30H36.0663",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Ae=g("browser",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M42 18V40C42 41.1046 41.1046 42 40 42H8C6.89543 42 6 41.1046 6 40V18",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M6 8C6 6.89543 6.89543 6 8 6H40C41.1046 6 42 6.89543 42 8V18H6V8Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z",fill:e.colors[2]},null),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 14C19.1046 14 20 13.1046 20 12C20 10.8954 19.1046 10 18 10C16.8954 10 16 10.8954 16 12C16 13.1046 16.8954 14 18 14Z",fill:e.colors[2]},null),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 14C25.1046 14 26 13.1046 26 12C26 10.8954 25.1046 10 24 10C22.8954 10 22 10.8954 22 12C22 13.1046 22.8954 14 24 14Z",fill:e.colors[2]},null)])}),Me=g("more",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("circle",{cx:"12",cy:"24",r:"3",fill:e.colors[0]},null),t("circle",{cx:"24",cy:"24",r:"3",fill:e.colors[0]},null),t("circle",{cx:"36",cy:"24",r:"3",fill:e.colors[0]},null)])}),$e=g("pause-one",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ze=g("power",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M14.5 8C13.8406 8.37652 13.2062 8.79103 12.6 9.24051C11.5625 10.0097 10.6074 10.8814 9.75 11.8402C6.79377 15.1463 5 19.4891 5 24.2455C5 34.6033 13.5066 43 24 43C34.4934 43 43 34.6033 43 24.2455C43 19.4891 41.2062 15.1463 38.25 11.8402C37.3926 10.8814 36.4375 10.0097 35.4 9.24051C34.7938 8.79103 34.1594 8.37652 33.5 8",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 4V24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),je=g("refresh-one",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"17",y:"24.071",width:"10",height:"10",rx:"2",transform:"rotate(-45 17 24.071)",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M40.1201 16C37.1747 10.0731 31.0586 6 23.9912 6C16.9237 6 10.9454 10.0731 8 16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M8 8V16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M14.7803 16L8.00013 16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M8 32C10.9454 37.9269 17.0615 42 24.129 42C31.1964 42 37.1747 37.9269 40.1201 32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M40.1201 40V32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M33.3398 32L40.12 32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),We={class:"w-full flex justify-center"},Te={class:"flex flex-row w-full space-x-[2rem]"},Ie=s("span",{class:"text-gray-400"},"The application name contains only lowercase letters, numbers, and hyphens (-)",-1),Ue=s("span",{class:"text-gray-400"},"The application describe information",-1),Be=s("span",{class:"text-gray-400"},"The application image",-1),De=s("span",{class:"text-gray-400"},"The application runs command on startup",-1),Oe={class:"dialog-footer"},Se={class:"flex flex-row w-full space-x-[2rem]"},He=s("span",{class:"text-gray-400"},"The application describe information",-1),Re=s("span",{class:"text-gray-400"},"The application image",-1),Fe=s("span",{class:"text-gray-400"},"The application runs command on startup",-1),Ne={class:"dialog-footer"},Ze={class:"flex flex-col w-full h-full px-[4rem] py-[2rem] space-y-[1rem]"},qe={class:"flex overflow-hidden rounded-md shadow-md border"},Pe={class:"flex w-full h-[5rem] items-center"},Ge=s("span",{class:"m-[0.75rem] text-2xl font-600"},"Applications",-1),Je={class:"flex justify-between space-x-[2rem]"},Ke=s("p",null,"Are you sure to delete this app?",-1),Qe={class:"ml-[0.5rem]"},Et={__name:"Application",setup(e){const B=pe(),v=p([]),x=p(!1),V=p(!1),A=p(!1),b=p(-1),z=p(""),u=p({name:"",image:"",cmd:[]}),r=p({name:"",image:"",cmd:[]}),j=p(),W=p(),y=p(""),D=ke(()=>v.value.filter(a=>!y.value||a.name.toLowerCase().includes(y.value.toLowerCase()))),T={timeout:"10000"};ve(()=>{w.get("/api/v1/containers").then(a=>{v.value=a.data.data})});const I=a=>Array.isArray(a)?a:a.trim().split(/\s+/),O=()=>{const a=d(j);a&&a.validate(l=>{l?w.post("/api/v1/containers",{name:u.value.name,image:u.value.image,cmd:I(u.value.cmd),describe:u.describe},T).then(i=>{C.success("Create success"),v.value.push(i.data.data),x.value=!1}):C.error("Input invalid")})},S=a=>{r.value=Object.assign({},a),V.value=!0},H=()=>{const a=d(W);a&&a.validate((l,i)=>{r.value.cmd=I(r.value.cmd),l?w.put("/api/v1/containers/"+r.value.id,r.value,T).then(f=>{C.success("Update success");const E=v.value.findIndex(m=>m.id===r.value.id);v.value[E]=r.value,V.value=!1}):C.error("Input invalid",i)})},R=a=>{w.delete("/api/v1/containers/"+a.id).then(()=>{C.success("Delete success");const l=v.value.findIndex(i=>i.id===a.id);v.value.splice(l,1),b.value=-1})},M=(a,l)=>{w.post(`/api/v1/containers/${a.id}?verb=${l}`).then(()=>{C.success(l+" success");const i=v.value.findIndex(f=>f.id===a.id);v.value[i].status=l})},L=a=>a.id.substring(0,12),F=a=>{window.open("/apps/"+L(a)+"/exec","_blank")},N=a=>{B.push("/apps/"+L(a)+"/proxy")},Z=a=>{const l="/api/v1/containers/"+L(a)+"/proxy";window.open(l,"_blank")},q=a=>{A.value=!0;const l=L(a);w.get(`/api/v1/containers/${l}/log`).then(i=>{z.value=i.data})},P=a=>a=="running"||a=="start"?"success":a=="stop"||a=="exited"?"warning":a=="dead"?"danger":"info";return(a,l)=>{const i=fe,f=ue,E=me,m=ae,$=ce,G=Ve,h=oe,J=be,K=de,_=ie,Q=se,X=re,Y=ne,ee=te;return he(),_e("div",We,[t($,{modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=o=>x.value=o),top:"5vh",title:"Create Application",width:"60%"},{footer:n(()=>[s("span",Oe,[t(m,{type:"primary",onClick:O},{default:n(()=>[c("Confirm")]),_:1}),t(m,{onClick:l[4]||(l[4]=o=>x.value=!1)},{default:n(()=>[c("Cancel")]),_:1})])]),default:n(()=>[t(E,{ref_key:"createFormRef",ref:j,model:u.value,"label-position":"top","label-width":"auto"},{default:n(()=>[s("div",Te,[t(f,{label:"Name",prop:"name",class:"w-1/2",required:""},{default:n(()=>[t(i,{modelValue:u.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>u.value.name=o)},null,8,["modelValue"]),Ie]),_:1}),t(f,{label:"Describe",prop:"describe",class:"w-1/2"},{default:n(()=>[t(i,{modelValue:u.value.describe,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.describe=o),type:"textarea"},null,8,["modelValue"]),Ue]),_:1})]),t(f,{label:"Image",prop:"image",required:""},{default:n(()=>[t(i,{modelValue:u.value.image,"onUpdate:modelValue":l[2]||(l[2]=o=>u.value.image=o)},null,8,["modelValue"]),Be]),_:1}),t(f,{label:"Command",prop:"cmd"},{default:n(()=>[t(i,{modelValue:u.value.cmd,"onUpdate:modelValue":l[3]||(l[3]=o=>u.value.cmd=o),type:"textarea"},null,8,["modelValue"]),De]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t($,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=o=>V.value=o),top:"5vh",title:"Update Application",width:"60%"},{footer:n(()=>[s("span",Ne,[t(m,{type:"primary",onClick:l[10]||(l[10]=o=>H())},{default:n(()=>[c("Confirm")]),_:1}),t(m,{onClick:l[11]||(l[11]=o=>V.value=!1)},{default:n(()=>[c("Cancel")]),_:1})])]),default:n(()=>[t(E,{ref_key:"updateFormRef",ref:W,model:r.value,"label-position":"top","label-width":"auto"},{default:n(()=>[s("div",Se,[t(f,{class:"w-1/2",label:"Name",prop:"name"},{default:n(()=>[t(i,{modelValue:r.value.name,"onUpdate:modelValue":l[6]||(l[6]=o=>r.value.name=o),disabled:""},null,8,["modelValue"])]),_:1}),t(f,{class:"w-1/2",label:"Describe",prop:"describe"},{default:n(()=>[t(i,{modelValue:r.value.describe,"onUpdate:modelValue":l[7]||(l[7]=o=>r.value.describe=o),type:"textarea"},null,8,["modelValue"]),He]),_:1})]),t(f,{label:"Image",prop:"image",required:""},{default:n(()=>[t(i,{modelValue:r.value.image,"onUpdate:modelValue":l[8]||(l[8]=o=>r.value.image=o)},null,8,["modelValue"]),Re]),_:1}),t(f,{label:"Command",prop:"cmd"},{default:n(()=>[t(i,{modelValue:r.value.cmd,"onUpdate:modelValue":l[9]||(l[9]=o=>r.value.cmd=o)},null,8,["modelValue"]),Fe]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t($,{modelValue:A.value,"onUpdate:modelValue":l[13]||(l[13]=o=>A.value=o),top:"5vh",width:"98%",title:"View Log"},{default:n(()=>[t(Ce,{height:"60vh",value:z.value,mode:"log",readOnly:"",light:""},null,8,["value"])]),_:1},8,["modelValue"]),s("div",Ze,[s("div",qe,[s("div",Pe,[t(d(U),{class:"ml-[1rem]",theme:"filled",size:"42",fill:"#94A3B8"}),Ge])]),t(ee,{class:"h-max"},{header:n(()=>[s("div",Je,[t(i,{modelValue:y.value,"onUpdate:modelValue":l[14]||(l[14]=o=>y.value=o),placeholder:"Type to search"},{prefix:n(()=>[t(G,null,{default:n(()=>[t(d(ye))]),_:1})]),_:1},8,["modelValue"]),t(m,{type:"primary",plain:"",icon:d(U),onClick:l[15]||(l[15]=o=>x.value=!0)},{default:n(()=>[c("Create")]),_:1},8,["icon"])])]),default:n(()=>[t(Y,{data:D.value,height:"360",class:"w-full max-h-full"},{default:n(()=>[t(h,{prop:"name",label:"Name",sortable:""}),t(h,{prop:"image",label:"Image"}),t(h,{prop:"status",label:"Status"},{default:n(o=>[t(J,{type:P(o.row.status)},{default:n(()=>[c(we(o.row.status),1)]),_:2},1032,["type"])]),_:1}),t(h,{prop:"cmd",label:"Command","min-width":"120px"}),t(h,{prop:"startAt",label:"StartAt",sortable:"","min-width":"120px"}),t(h,{prop:"Operation",label:"Operation","min-width":"120px"},{default:n(o=>[t(m,{size:"small",type:"primary",circle:"",onClick:k=>F(o.row),icon:d(ge)},null,8,["onClick","icon"]),t(m,{class:"ml-[0.5rem]",size:"small",circle:"",onClick:k=>S(o.row),icon:d(Le)},null,8,["onClick","icon"]),t(K,{visible:b.value==o.$index,placement:"top",width:180},{reference:n(()=>[t(m,{size:"small",type:"danger",onClick:k=>b.value=o.$index,icon:d(le),circle:"",class:"wl-[1rem]"},null,8,["onClick","icon"])]),default:n(()=>[Ke,s("span",Qe,[t(m,{size:"small",text:"",onClick:l[16]||(l[16]=k=>b.value=-1)},{default:n(()=>[c("cancel")]),_:1}),t(m,{size:"small",type:"danger",onClick:k=>R(o.row)},{default:n(()=>[c("confirm")]),_:2},1032,["onClick"])])]),_:2},1032,["visible"]),t(X,{class:"ml-[0.5rem]",trigger:"click"},{dropdown:n(()=>[t(Q,null,{default:n(()=>[t(_,{icon:d(xe),onClick:k=>q(o.row)},{default:n(()=>[c("Log")]),_:2},1032,["icon","onClick"]),t(_,{icon:d(Ee),onClick:k=>N(o.row)},{default:n(()=>[c("Proxy")]),_:2},1032,["icon","onClick"]),t(_,{icon:d(Ae),onClick:k=>Z(o.row)},{default:n(()=>[c("Open")]),_:2},1032,["icon","onClick"]),t(_,{icon:d($e),onClick:k=>M(o.row,"stop")},{default:n(()=>[c("Stop")]),_:2},1032,["icon","onClick"]),t(_,{icon:d(ze),onClick:k=>M(o.row,"start")},{default:n(()=>[c("Start")]),_:2},1032,["icon","onClick"]),t(_,{icon:d(je),onClick:k=>M(o.row,"restart")},{default:n(()=>[c("Restart ")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:n(()=>[t(m,{size:"small",circle:"",icon:d(Me)},null,8,["icon"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})])])}}};export{Et as default};
