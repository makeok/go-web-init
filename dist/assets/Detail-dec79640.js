import"./base-bca4072a.js";import"./popper-0dc31dc9.js";import{E as S}from"./popover-a65edf18.js";import{E as T}from"./button-dab0515e.js";import{c as s,E as I,r,D as N,z as A,j as Z,o as C,a as b,f as t,u as m,t as c,g as j,a3 as q,w as d,F as R,b as U,v as O,h}from"./index-c09751bd.js";import{_ as Q}from"./Page-c23ebed7.js";import{r as k,E as G}from"./index-1531c9b4.js";import{u as J}from"./post-d72dbac7.js";import{I as f}from"./index-a30895c1.js";import"./index-aa6ba756.js";import"./isNil-c75b1b34.js";import"./focus-trap-563a4cd8.js";import"./MarkDown-286b97f4.js";import"./_commonjsHelpers-de833af9.js";import"./axios-a342f982.js";const K=f("like",!1,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M15 8C8.92487 8 4 12.9249 4 19C4 30 17 40 24 42.3262C31 40 44 30 44 19C44 12.9249 39.0751 8 33 8C29.2797 8 25.9907 9.8469 24 12.6738C22.0093 9.8469 18.7203 8 15 8Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),X=f("message-one",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M4 6H44V36H29L24 41L19 36H4V6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M23 21H25.0025",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M33.001 21H34.9999",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M13.001 21H14.9999",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),Y=f("panda",!1,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("ellipse",{cx:"24",cy:"27",rx:"18",ry:"17",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth},null),s("ellipse",{cx:"16.9333",cy:"24.6402",rx:"3",ry:"4",transform:"rotate(15 16.9333 24.6402)",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth},null),s("ellipse",{rx:"3",ry:"4",transform:"matrix(-0.965926 0.258819 0.258819 0.965926 30.9329 24.6402)",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth},null),s("path",{d:"M40.9995 20.999C44.1237 17.8748 44.4376 12.7804 41.3134 9.65616C38.1892 6.53196 32.124 6.87507 28.9998 9.99927",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M7 20.9995C3.87581 17.8753 3.53224 12.7807 6.65644 9.65655C9.78063 6.53236 15.8758 6.87532 19 9.99951",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),s("path",{d:"M20 35C20.5 36.2935 22.2 38.2769 25 35.8623C27.8 38.2769 29.5 36.2935 30 35",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ee=f("planet",!0,function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M24 40C32.8366 40 40 32.8366 40 24C40 15.1634 32.8366 8 24 8C15.1634 8 8 15.1634 8 24C8 32.8366 15.1634 40 24 40Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M37.5641 15.5098C41.7833 15.878 44.6787 17.1724 45.2504 19.306C46.3939 23.5737 37.8068 29.5827 26.0705 32.7274C14.3343 35.8721 3.89316 34.9617 2.74963 30.694C2.1505 28.458 4.22245 25.744 8.01894 23.2145",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),te={class:"flex w-full h-full justify-center"},se={class:"w-full max-w-3xl mr-48 h-full"},oe={class:"px-16"},le={class:"flex justify-center w-full space-x-4 h-auto"},ie={class:"flex space-x-1"},ne={class:"flex space-x-1"},ae={class:"flex space-x-1"},re={class:"flex flex-col antialiased mx-8 my-4"},ce={class:"flex my-2"},de={class:"mb-4 w-full bg-gray-50 rounded-lg border border-gray-200"},ue={class:"py-2 px-4 bg-white rounded-t-lg"},me={class:"flex justify-end items-center py-2 px-3 border-t"},he={class:"space-y-4"},ke={class:"flex"},fe={class:"flex-shrink-0 mr-3"},ve={class:"flex-1 border rounded-lg px-4 py-2 sm:px-6 sm:py-4 leading-relaxed"},_e={class:"text-xs text-gray-400"},xe={class:"text-sm"},we={class:"flex-2 h-16 max-w-fit pl-16 text-sm leading-6 mt-16"},ge={class:"pt-10 pb-28 border-t border-slate-200 sm:flex justify-between text-slate-500"},Ce=t("div",{class:"mb-6 sm:mb-0 sm:flex"},[t("p",null,"Copyright Â© 2022 Qinng.")],-1),be={class:"mb-6 sm:mb-0 sm:flex"},ye={class:"sm:ml-4 sm:pl-4"},Le=t("p",null,"Are you sure to delete this article?",-1),pe={class:"ml-[0.5rem]"},je={class:"sm:ml-4 sm:pl-4 sm:border-l sm:border-slate-200"},Ze={__name:"Detail",setup(e){const z=I(),W=r(!1),y=N(),l=y.params.post,v=r({}),o=r({}),M=J(),_=r(!1),P={timeout:"5000"},u=r([]);A(()=>{k.get(`/api/v1/posts/${l}`,P).then(n=>{o.value=n.data.data,v.value={title:o.value.name,content:o.value.content,author:o.value.creator.name,date:o.value.createdAt,likes:o.value.likes,views:o.value.views},M.set(o.value),W.value=!0,u.value=o.value.comments})});const E=()=>{k.delete(`/api/v1/posts/${l}`).then(()=>{G.success("Delete success"),y.push("/posts/list")})},L=["#333","#ffffff"],p=["#333","#f87171"],x=()=>o.value.userLiked?p:L,$=()=>{o.value.userLiked?k.delete(`/api/v1/posts/${l}/like`).then(()=>{o.value.userLiked=!1,o.value.likes=o.value.likes-1,x.value=L}):k.post(`/api/v1/posts/${l}/like`).then(()=>{o.value.userLiked=!0,o.value.likes=o.value.likes+1,x.value=p})},B=()=>u.value?u.value.length:[],w=r(""),D=()=>{k.post(`/api/v1/posts/${l}/comment`,{postId:Number(l),userId:z.id,content:w.value}).then(n=>{u.value.push(n.data.data)})},F=n=>new Date(n).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"});return(n,a)=>{const g=T,H=S,V=Z("router-link");return C(),b("div",te,[t("div",se,[s(Q,{config:v.value,class:"flex-1"},null,8,["config"]),t("div",oe,[t("div",le,[t("div",ie,[t("button",null,[s(m(K),{theme:"two-tone",size:"24",fill:x(),onClick:$},null,8,["fill"])]),t("p",null,c(o.value.likes),1)]),t("div",ne,[s(m(ee),{theme:"two-tone",size:"24",fill:["#333","#38bdf8"]}),t("p",null,c(o.value.views),1)]),t("div",ae,[s(m(X),{theme:"two-tone",size:"24",fill:["#333","#fbbf24"]}),t("p",null,c(B()),1)])]),t("div",re,[t("form",ce,[t("div",de,[t("div",ue,[j(t("textarea",{rows:"4","onUpdate:modelValue":a[0]||(a[0]=i=>w.value=i),class:"px-0 w-full text-sm text-gray-900 bg-white border-0 outline-none",placeholder:"Write a comment...",required:""},null,512),[[q,w.value]])]),t("div",me,[s(g,{type:"primary",onClick:D},{default:d(()=>[h("Post comment")]),_:1})])])]),t("div",he,[(C(!0),b(R,null,U(u.value,i=>(C(),b("div",ke,[t("div",fe,[s(m(Y),{size:"32",fill:["#333","#2F88FF"]})]),t("div",ve,[t("strong",null,c(i.user.name),1),h(),t("span",_e,c(F(i.createdAt)),1),t("p",xe,c(i.content),1)])]))),256))])])]),j(t("footer",we,[t("div",ge,[Ce,t("div",be,[t("p",ye,[s(H,{visible:_.value,placement:"top",width:180},{reference:d(()=>[t("button",{class:"hover:text-slate-700",onClick:a[1]||(a[1]=i=>_.value=!0)},"Remove")]),default:d(()=>[Le,t("span",pe,[s(g,{size:"small",text:"",onClick:a[2]||(a[2]=i=>_.value=!1)},{default:d(()=>[h("cancel")]),_:1}),s(g,{size:"small",type:"danger",onClick:E},{default:d(()=>[h("confirm")]),_:1})])]),_:1},8,["visible"])]),t("p",je,[s(V,{class:"hover:text-slate-700",to:`/posts/editor/${m(l)}`,target:"__blank"},{default:d(()=>[h("Edit Page ")]),_:1},8,["to"])])])])],512),[[O,v.value.content]])])])}}};export{Ze as default};
